(function(r,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(r=typeof globalThis<"u"?globalThis:r||self,e(r.VueBotUI={},r.Vue))})(this,function(r,e){"use strict";const p={EVENT_OPEN:"botui-open",EVENT_CLOSE:"botui-close",EVENT_TOGGLE:"botui-toggle"},d=(t,o)=>{const n=t.__vccOpts||t;for(const[l,s]of o)n[l]=s;return n},y={class:"qkb-board-header"},C={class:"qkb-board-header__title"},_=d({__name:"Header",props:{botTitle:{type:String,default:"Chatbot"},colorScheme:{type:String,default:"#1a4bff"},textColor:{type:String,default:"#fff"}},setup(t){return e.useCssVars(o=>({"899703c0":t.colorScheme,"989fc124":t.textColor})),(o,n)=>(e.openBlock(),e.createElementBlock("div",y,[e.renderSlot(o.$slots,"header",{},()=>[e.createElementVNode("div",C,e.toDisplayString(t.botTitle),1)],!0)]))}},[["__scopeId","data-v-d4de3b4f"]]),x={class:"qkb-msg-bubble-component qkb-msg-bubble-component--single-text"},S={class:"qkb-msg-bubble-component__text"},E=d({__name:"SingleText",props:{mainData:{type:Object,required:!0},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"},isUserMessage:{type:Boolean,default:!1}},setup(t){return e.useCssVars(o=>({bb7eabf4:t.isUserMessage?t.msgBubbleBgUser:t.msgBubbleBgBot,"448759d8":t.isUserMessage?t.msgBubbleColorUser:t.msgBubbleColorBot})),(o,n)=>(e.openBlock(),e.createElementBlock("div",x,[e.createElementVNode("div",S,e.toDisplayString(t.mainData.text),1)]))}},[["__scopeId","data-v-e044f48b"]]);function q(t){return{all:t=t||new Map,on:function(o,n){var l=t.get(o);l?l.push(n):t.set(o,[n])},off:function(o,n){var l=t.get(o);l&&(n?l.splice(l.indexOf(n)>>>0,1):t.set(o,[]))},emit:function(o,n){var l=t.get(o);l&&l.slice().map(function(s){s(n)}),(l=t.get("*"))&&l.slice().map(function(s){s(o,n)})}}}const k=q(),V={class:"qkb-msg-bubble-component qkb-msg-bubble-component--button-options"},w={class:"qkb-msg-bubble-component__text"},$={class:"qkb-msg-bubble-component__options-wrapper"},N=["onClick"],D=["href"],v=d({__name:"ButtonOptions",props:{mainData:{type:Object,required:!0},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"},isUserMessage:{type:Boolean,default:!1}},setup(t){e.useCssVars(l=>({74142707:t.msgBubbleBgBot,e82f5502:t.msgBubbleColorBot,"0e796a8b":t.msgBubbleBgUser,"1da9e9da":t.msgBubbleColorUser}));const o=e.ref(null),n=l=>{o.value=l.value,k.emit("button-clicked",{action:l.action||"click",value:l.value,text:l.text,originalItem:l})};return(l,s)=>(e.openBlock(),e.createElementBlock("div",V,[e.createElementVNode("div",w,e.toDisplayString(t.mainData.text),1),e.createElementVNode("div",$,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.mainData.options,(b,a)=>(e.openBlock(),e.createElementBlock("div",{key:a,class:e.normalizeClass([{active:o.value===b.value},"qkb-mb-button-options__item"])},[b.action!=="url"?(e.openBlock(),e.createElementBlock("button",{key:0,class:"qkb-mb-button-options__btn",onClick:u=>n(b)},[e.createElementVNode("span",null,e.toDisplayString(b.text),1)],8,N)):(e.openBlock(),e.createElementBlock("a",{key:1,href:b.value,target:"_blank",class:"qkb-mb-button-options__btn qkb-mb-button-options__url"},[e.createElementVNode("span",null,e.toDisplayString(b.text),1)],8,D))],2))),128))])]))}},[["__scopeId","data-v-0341e4d1"]]),T={key:0,class:"qkb-msg-avatar"},U={key:2,class:"qkb-msg-bubble__time"},I=d({__name:"Main",props:{message:{type:Object,required:!0},botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"}},setup(t){e.useCssVars(s=>({"4aaf0702":t.botAvatarSize+"px","4fa00e38":"url("+t.botAvatarImg+")"}));const o=t,n=e.computed(()=>o.message.agent==="bot"?"qkb-msg-bubble--bot":"qkb-msg-bubble--user"),l=e.computed(()=>{switch(o.message.type){case"button":return v;default:return E}});return(s,b)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-msg-bubble",n.value])},[t.message.agent==="bot"?(e.openBlock(),e.createElementBlock("div",T,b[0]||(b[0]=[e.createElementVNode("div",{class:"qkb-msg-avatar__img"}," ",-1)]))):e.createCommentVNode("",!0),l.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(l.value),{key:1,"main-data":t.message,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot,"msg-bubble-bg-user":t.msgBubbleBgUser,"msg-bubble-color-user":t.msgBubbleColorUser,"is-user-message":t.message.agent==="user"},null,8,["main-data","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user","is-user-message"])):e.createCommentVNode("",!0),t.message.createdAt?(e.openBlock(),e.createElementBlock("div",U,e.toDisplayString(t.message.createdAt),1)):e.createCommentVNode("",!0)],2))}},[["__scopeId","data-v-9c39555b"]]),M={class:"qkb-msg-bubble qkb-msg-bubble--bot"},A=d({__name:"Typing",props:{botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"}},setup(t){return e.useCssVars(o=>({"4d54dd48":t.botAvatarSize+"px","4ca3d3fb":"url("+t.botAvatarImg+")","5040f4b1":t.msgBubbleBgBot,e48ca0d6:t.msgBubbleColorBot})),(o,n)=>(e.openBlock(),e.createElementBlock("div",M,n[0]||(n[0]=[e.createStaticVNode('<div class="qkb-msg-avatar" data-v-e819e473><div class="qkb-msg-avatar__img" data-v-e819e473> </div></div><div class="qkb-msg-bubble-component qkb-msg-bubble-component--typing" data-v-e819e473><div class="qkb-msg-bubble-component__text" data-v-e819e473><div class="qkb-msg-bubble__typing-indicator" data-v-e819e473><span data-v-e819e473></span><span data-v-e819e473></span><span data-v-e819e473></span></div></div></div>',2)])))}},[["__scopeId","data-v-e819e473"]]),z={key:0,class:"qkb-board-content__bot-typing"},P=d({__name:"Content",props:{mainData:{type:Array,required:!0},botTyping:{type:Boolean,default:!1},boardContentBg:{type:String,default:"#fff"},botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"}},setup(t){e.useCssVars(b=>({ba1b7fe8:t.boardContentBg}));const o=t,n=e.ref(null),l=e.ref(null),s=()=>{const b=n.value,a=l.value.offsetHeight;b.scrollTop=a};return e.watch(()=>o.mainData,()=>{e.nextTick(()=>{s()})}),(b,a)=>(e.openBlock(),e.createElementBlock("div",{class:"qkb-board-content",ref_key:"boardContent",ref:n},[e.createElementVNode("div",{class:"qkb-board-content__bubbles",ref_key:"boardBubbles",ref:l},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.mainData,(u,m)=>(e.openBlock(),e.createBlock(I,{key:m,message:u,"bot-avatar-size":t.botAvatarSize,"bot-avatar-img":t.botAvatarImg,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot,"msg-bubble-bg-user":t.msgBubbleBgUser,"msg-bubble-color-user":t.msgBubbleColorUser},null,8,["message","bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user"]))),128)),t.botTyping?(e.openBlock(),e.createElementBlock("div",z,[e.renderSlot(b.$slots,"botTyping",{},()=>[e.createVNode(A,{"bot-avatar-size":t.botAvatarSize,"bot-avatar-img":t.botAvatarImg,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot},null,8,["bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot"])],!0)])):e.createCommentVNode("",!0)],512)],512))}},[["__scopeId","data-v-946dc6df"]]),O={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 488.721 488.721"};function L(t,o){return e.openBlock(),e.createElementBlock("svg",O,o[0]||(o[0]=[e.createElementVNode("path",{d:"M483.589 222.024a51.2 51.2 0 0 0-23.762-23.762L73.522 11.331C48.074-.998 17.451 9.638 5.122 35.086A51.2 51.2 0 0 0 3.669 76.44l67.174 167.902L3.669 412.261c-10.463 26.341 2.409 56.177 28.75 66.639a51.3 51.3 0 0 0 18.712 3.624c7.754 0 15.408-1.75 22.391-5.12l386.304-186.982c25.45-12.326 36.089-42.949 23.763-68.398M58.657 446.633c-8.484 4.107-18.691.559-22.798-7.925a17.07 17.07 0 0 1-.481-13.784l65.399-163.516h340.668zm42.121-219.358L35.379 63.759a16.64 16.64 0 0 1 4.215-18.773 16.54 16.54 0 0 1 19.063-2.884l382.788 185.173z"},null,-1)]))}const H={render:L},j={class:"qkb-board-action__wrapper"},G={class:"qkb-board-action__msg-box"},Z=["disabled","placeholder"],K={class:"qkb-board-action__extra"},F=["disabled"],J=d({__name:"Action",props:{inputPlaceholder:{type:String,default:"Type here..."},inputDisablePlaceholder:{type:String,default:"Hit the buttons above to respond"},inputDisable:{type:Boolean,default:!1},inputDisableBg:{type:String,default:"#fff"},msgBubbleBgUser:{type:String,default:"#4356e0"}},emits:["msg-send"],setup(t,{emit:o}){e.useCssVars(c=>({dd375256:t.inputDisableBg,"6e13778b":t.msgBubbleBgUser}));const n=t,l=o,s=e.ref(null),b=e.ref(null),a=e.computed(()=>{const c=[];return n.inputDisable&&c.push("qkb-board-action--disabled"),s.value&&c.push("qkb-board-action--typing"),c});e.onMounted(()=>{var c;n.inputDisable||(c=b.value)==null||c.focus(),g()});const u=()=>{var c;s.value&&!n.inputDisable&&(l("msg-send",{text:s.value}),s.value=null,(c=b.value)==null||c.focus())},m=c=>{if(c.key==="Enter")if(c.shiftKey)c.preventDefault(),u();else return},g=()=>{b.value&&(b.value.style.height="auto",b.value.style.height=b.value.scrollHeight+"px")};return e.watch(s,()=>{e.nextTick(()=>{g()})}),(c,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-board-action",a.value])},[e.createElementVNode("div",j,[e.createElementVNode("div",G,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"qkbMessageInput",ref:b,"onUpdate:modelValue":f[0]||(f[0]=B=>s.value=B),class:"qkb-board-action__input",disabled:t.inputDisable,placeholder:t.inputDisablePlaceholder&&t.inputDisable?t.inputDisablePlaceholder:t.inputPlaceholder,onKeydown:m,onInput:g,rows:"1"},null,40,Z),[[e.vModelText,s.value]])]),e.createElementVNode("div",K,[e.renderSlot(c.$slots,"actions",{},void 0,!0),e.createElementVNode("button",{class:"qkb-action-item qkb-action-item--send",onClick:u,disabled:!s.value||t.inputDisable},[e.renderSlot(c.$slots,"sendButton",{},()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(H)),{class:"qkb-action-icon qkb-action-icon--send"}))],!0)],8,F)])])],2))}},[["__scopeId","data-v-f2b47962"]]),Q={xmlns:"http://www.w3.org/2000/svg",width:"511pt",height:"511pt",viewBox:"1 -31 512 511"};function R(t,o){return e.openBlock(),e.createElementBlock("svg",Q,o[0]||(o[0]=[e.createElementVNode("path",{d:"M128 448.5c-8.836 0-16-7.164-16-16v-80H48c-26.512 0-48-21.492-48-48v-256C0 21.988 21.488.5 48 .5h416c26.512 0 48 21.488 48 48v256c0 26.508-21.488 48-48 48H230.625l-91.312 91.313c-3 3-7.07 4.687-11.313 4.687m-80-416c-8.836 0-16 7.164-16 16v256c0 8.836 7.164 16 16 16h80c8.836 0 16 7.164 16 16v57.375l68.688-68.687c3-3 7.07-4.688 11.312-4.688h240c8.836 0 16-7.164 16-16v-256c0-8.836-7.164-16-16-16zm0 0"},null,-1),e.createElementVNode("path",{d:"M160 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M352 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M256 288.5c-52.996-.05-95.945-43.004-96-96 0-8.836 7.164-16 16-16s16 7.164 16 16c0 35.348 28.652 64 64 64s64-28.652 64-64c0-8.836 7.164-16 16-16s16 7.164 16 16c-.055 52.996-43.004 95.945-96 96m0 0"},null,-1)]))}const W={render:R},X={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 512.001 512.001"};function Y(t,o){return e.openBlock(),e.createElementBlock("svg",X,o[0]||(o[0]=[e.createElementVNode("path",{d:"M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475 0-28.285s-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0s-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.94 19.94 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285z"},null,-1)]))}const ee={render:Y},te={key:0,class:"qkb-board"},oe={class:"qkb-bot-bubble"},ae={class:"qkb-preload-image"},le={key:0,class:"qkb-msg-avatar__img"},h=d({__name:"BotUI",props:{options:{type:Object,default:()=>({})},messages:{type:Array},botTyping:{type:Boolean,default:!1},inputDisable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},openDelay:{type:Number}},emits:["init","destroy","msg-send","button-clicked"],setup(t,{emit:o}){e.useCssVars(i=>({12679521:a.value.windowZIndex,cd525d90:a.value.windowPosition.bottom||"auto","4f4e26b1":a.value.windowPosition.right||"auto","9eaf68ac":a.value.windowPosition.top||"auto","468f3b14":a.value.windowPosition.left||"auto","4080ee86":a.value.bubbleZIndex,"4bbaa01c":a.value.bubblePosition.bottom||"auto","2382eb4d":a.value.bubblePosition.right||"auto","553d8746":a.value.bubblePosition.top||"auto","34a172f8":a.value.bubblePosition.left||"auto","5fc606d5":a.value.bubbleBtnSize+"px","233e772f":a.value.colorScheme,"50b3103d":a.value.textColor}));const n=t,l=o,s=e.ref(!1),b={botTitle:"Chatbot",colorScheme:"#1b53d0",textColor:"#fff",bubbleBtnSize:56,animation:!0,boardContentBg:"#fff",botAvatarSize:32,botAvatarImg:"http://placehold.it/200x200",msgBubbleBgBot:"#f0f0f0",msgBubbleColorBot:"#000",msgBubbleBgUser:"#4356e0",msgBubbleColorUser:"#fff",inputPlaceholder:"Message",inputDisableBg:"#fff",inputDisablePlaceholder:null,bubbleZIndex:9998,bubblePosition:{bottom:"20px",right:"20px",top:null,left:null},windowZIndex:9999,windowPosition:{bottom:"80px",right:"20px",top:null,left:null}},a=e.computed(()=>({...b,...n.options})),u=e.computed(()=>{const i=[];return a.value.animation&&i.push("qkb-bot-ui--animate"),i}),m=()=>{s.value||c()},g=()=>{s.value&&c()},c=()=>{s.value=!s.value,s.value?l("init"):l("destroy")},f=i=>{l("msg-send",i)},B=i=>{l("button-clicked",i)};return n.isOpen&&(n.openDelay?setTimeout(m,n.openDelay):c()),e.onMounted(()=>{document.addEventListener(p.EVENT_OPEN,m),document.addEventListener(p.EVENT_CLOSE,g),document.addEventListener(p.EVENT_TOGGLE,c),k.on("button-clicked",B)}),e.onUnmounted(()=>{k.off("button-clicked",B)}),(i,ge)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-bot-ui",u.value])},[e.createVNode(e.Transition,{name:"qkb-fadeUp"},{default:e.withCtx(()=>[s.value?(e.openBlock(),e.createElementBlock("div",te,[e.createVNode(_,{"bot-title":a.value.botTitle,"color-scheme":a.value.colorScheme,"text-color":a.value.textColor,onCloseBot:c},{header:e.withCtx(()=>[e.renderSlot(i.$slots,"header",{},void 0,!0)]),_:3},8,["bot-title","color-scheme","text-color"]),e.createVNode(P,{"bot-typing":t.botTyping,"main-data":t.messages,"board-content-bg":a.value.boardContentBg,"bot-avatar-size":a.value.botAvatarSize,"bot-avatar-img":a.value.botAvatarImg,"msg-bubble-bg-bot":a.value.msgBubbleBgBot,"msg-bubble-color-bot":a.value.msgBubbleColorBot,"msg-bubble-bg-user":a.value.msgBubbleBgUser,"msg-bubble-color-user":a.value.msgBubbleColorUser},{botTyping:e.withCtx(()=>[e.renderSlot(i.$slots,"botTyping",{},void 0,!0)]),_:3},8,["bot-typing","main-data","board-content-bg","bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user"]),e.createVNode(J,{"input-disable":t.inputDisable,"input-placeholder":a.value.inputPlaceholder,"input-disable-placeholder":a.value.inputDisablePlaceholder,"input-disable-bg":a.value.inputDisableBg,"msg-bubble-bg-user":a.value.msgBubbleBgUser,onMsgSend:f},{actions:e.withCtx(()=>[e.renderSlot(i.$slots,"actions",{},void 0,!0)]),sendButton:e.withCtx(()=>[e.renderSlot(i.$slots,"sendButton",{},void 0,!0)]),_:3},8,["input-disable","input-placeholder","input-disable-placeholder","input-disable-bg","msg-bubble-bg-user"])])):e.createCommentVNode("",!0)]),_:3}),e.createElementVNode("div",oe,[e.createElementVNode("button",{class:"qkb-bubble-btn",onClick:c},[e.renderSlot(i.$slots,"bubbleButton",{},()=>[e.createVNode(e.Transition,{name:"qkb-scaleUp"},{default:e.withCtx(()=>[s.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(ee)),{key:"2",class:"qkb-bubble-btn-icon qkb-bubble-btn-icon--close"})):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(W)),{key:"1",class:"qkb-bubble-btn-icon"}))]),_:1})],!0)])]),e.createElementVNode("div",ae,[a.value.botAvatarImg?(e.openBlock(),e.createElementBlock("div",le)):e.createCommentVNode("",!0)])],2))}},[["__scopeId","data-v-b60df9e6"]]),ne={install(t,o){t.component("VueBotUI",h)}};r.VueBotUI=h,r.default=ne,Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
