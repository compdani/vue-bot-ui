(function(m,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(m=typeof globalThis<"u"?globalThis:m||self,t(m.VueBotUI={},m.Vue))})(this,function(m,t){"use strict";function $(e){return{all:e=e||new Map,on:function(o,s){var n=e.get(o);n?n.push(s):e.set(o,[s])},off:function(o,s){var n=e.get(o);n&&(s?n.splice(n.indexOf(s)>>>0,1):e.set(o,[]))},emit:function(o,s){var n=e.get(o);n&&n.slice().map(function(l){l(s)}),(n=e.get("*"))&&n.slice().map(function(l){l(o,s)})}}}const f=$(),B={EVENT_OPEN:"botui-open",EVENT_CLOSE:"botui-close",EVENT_TOGGLE:"botui-toggle"},u=(e,o)=>{const s=e.__vccOpts||e;for(const[n,l]of o)s[n]=l;return s},E={class:"qkb-board-header"},x={class:"qkb-board-header__title"},C=u({__name:"Header",props:{botTitle:{type:String,default:"Chatbot"}},setup(e){return(o,s)=>(t.openBlock(),t.createElementBlock("div",E,[t.renderSlot(o.$slots,"header",{},()=>[t.createElementVNode("div",x,t.toDisplayString(e.botTitle),1)],!0)]))}},[["__scopeId","data-v-f9138795"]]),V={class:"qkb-msg-bubble-component qkb-msg-bubble-component--single-text"},N={class:"qkb-msg-bubble-component__text"},w=u({__name:"SingleText",props:{mainData:{type:Object,required:!0}},setup(e){return(o,s)=>(t.openBlock(),t.createElementBlock("div",V,[t.createElementVNode("div",N,t.toDisplayString(e.mainData.text),1)]))}},[["__scopeId","data-v-5c6137b5"]]),S={class:"qkb-msg-bubble-component qkb-msg-bubble-component--button-options"},D={class:"qkb-msg-bubble-component__text"},T={class:"qkb-msg-bubble-component__options-wrapper"},I=["onClick"],M=["href"],O=u({__name:"ButtonOptions",props:{mainData:{type:Object,required:!0}},setup(e){const o=t.ref(null),s=n=>{o.value=n,f.emit("select-button-option",n)};return(n,l)=>(t.openBlock(),t.createElementBlock("div",S,[t.createElementVNode("div",D,t.toDisplayString(e.mainData.text),1),t.createElementVNode("div",T,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.mainData.options,(c,i)=>(t.openBlock(),t.createElementBlock("div",{key:i,class:t.normalizeClass([{active:o.value===c.value},"qkb-mb-button-options__item"])},[c.action==="postback"?(t.openBlock(),t.createElementBlock("button",{key:0,class:"qkb-mb-button-options__btn",onClick:p=>s(c)},[t.createElementVNode("span",null,t.toDisplayString(c.text),1)],8,I)):(t.openBlock(),t.createElementBlock("a",{key:1,href:c.value,target:"_blank",class:"qkb-mb-button-options__btn qkb-mb-button-options__url"},[t.createElementVNode("span",null,t.toDisplayString(c.text),1)],8,M))],2))),128))])]))}},[["__scopeId","data-v-d9b43897"]]),L={key:0,class:"qkb-msg-avatar"},P={key:2,class:"qkb-msg-bubble__time"},z=u({__name:"Main",props:{message:{type:Object,required:!0}},setup(e){const o=e,s=t.computed(()=>o.message.agent==="bot"?"qkb-msg-bubble--bot":"qkb-msg-bubble--user"),n=t.computed(()=>{switch(o.message.type){case"button":return O;default:return w}});return(l,c)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["qkb-msg-bubble",s.value])},[e.message.agent==="bot"?(t.openBlock(),t.createElementBlock("div",L,c[0]||(c[0]=[t.createElementVNode("div",{class:"qkb-msg-avatar__img"}," ",-1)]))):t.createCommentVNode("",!0),n.value?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(n.value),{key:1,"main-data":e.message},null,8,["main-data"])):t.createCommentVNode("",!0),e.message.createdAt?(t.openBlock(),t.createElementBlock("div",P,t.toDisplayString(e.message.createdAt),1)):t.createCommentVNode("",!0)],2))}},[["__scopeId","data-v-8ffb9570"]]),A={},U={class:"qkb-msg-bubble qkb-msg-bubble--bot"};function H(e,o){return t.openBlock(),t.createElementBlock("div",U,o[0]||(o[0]=[t.createStaticVNode('<div class="qkb-msg-avatar" data-v-f53a7844><div class="qkb-msg-avatar__img" data-v-f53a7844> </div></div><div class="qkb-msg-bubble-component qkb-msg-bubble-component--typing" data-v-f53a7844><div class="qkb-msg-bubble-component__text" data-v-f53a7844><div class="qkb-msg-bubble__typing-indicator" data-v-f53a7844><span data-v-f53a7844></span><span data-v-f53a7844></span><span data-v-f53a7844></span></div></div></div>',2)]))}const j=u(A,[["render",H],["__scopeId","data-v-f53a7844"]]),G={key:0,class:"qkb-board-content__bot-typing"},Z=u({__name:"Content",props:{mainData:{type:Array,required:!0},botTyping:{type:Boolean,default:!1}},setup(e){const o=e,s=t.ref(null),n=t.ref(null),l=()=>{const c=s.value,i=n.value.offsetHeight;c.scrollTop=i};return t.watch(()=>o.mainData,()=>{t.nextTick(()=>{l()})}),(c,i)=>(t.openBlock(),t.createElementBlock("div",{class:"qkb-board-content",ref_key:"boardContent",ref:s},[t.createElementVNode("div",{class:"qkb-board-content__bubbles",ref_key:"boardBubbles",ref:n},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.mainData,(p,r)=>(t.openBlock(),t.createBlock(z,{key:r,message:p},null,8,["message"]))),128)),e.botTyping?(t.openBlock(),t.createElementBlock("div",G,[t.renderSlot(c.$slots,"botTyping",{},()=>[t.createVNode(j)],!0)])):t.createCommentVNode("",!0)],512)],512))}},[["__scopeId","data-v-2e77dfb2"]]),F={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 488.721 488.721"};function K(e,o){return t.openBlock(),t.createElementBlock("svg",F,o[0]||(o[0]=[t.createElementVNode("path",{d:"M483.589 222.024a51.2 51.2 0 0 0-23.762-23.762L73.522 11.331C48.074-.998 17.451 9.638 5.122 35.086A51.2 51.2 0 0 0 3.669 76.44l67.174 167.902L3.669 412.261c-10.463 26.341 2.409 56.177 28.75 66.639a51.3 51.3 0 0 0 18.712 3.624c7.754 0 15.408-1.75 22.391-5.12l386.304-186.982c25.45-12.326 36.089-42.949 23.763-68.398M58.657 446.633c-8.484 4.107-18.691.559-22.798-7.925a17.07 17.07 0 0 1-.481-13.784l65.399-163.516h340.668zm42.121-219.358L35.379 63.759a16.64 16.64 0 0 1 4.215-18.773 16.54 16.54 0 0 1 19.063-2.884l382.788 185.173z"},null,-1)]))}const J={render:K},Q={class:"qkb-board-action__wrapper"},R={class:"qkb-board-action__msg-box"},W=["disabled","placeholder"],X={class:"qkb-board-action__extra"},Y=["disabled"],v=u({__name:"Action",props:{inputPlaceholder:{type:String,default:"Type here..."},inputDisablePlaceholder:{type:String,default:"Hit the buttons above to respond"},inputDisable:{type:Boolean,default:!1}},emits:["msg-send"],setup(e,{emit:o}){const s=e,n=o,l=t.ref(null),c=t.ref(null),i=t.computed(()=>{const r=[];return s.inputDisable&&r.push("qkb-board-action--disabled"),l.value&&r.push("qkb-board-action--typing"),r});t.onMounted(()=>{var r;s.inputDisable||(r=c.value)==null||r.focus()});const p=()=>{var r;l.value&&!s.inputDisable&&(n("msg-send",{text:l.value}),l.value=null,(r=c.value)==null||r.focus())};return(r,_)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["qkb-board-action",i.value])},[t.createElementVNode("div",Q,[t.createElementVNode("div",R,[t.withDirectives(t.createElementVNode("input",{ref_key:"qkbMessageInput",ref:c,"onUpdate:modelValue":_[0]||(_[0]=k=>l.value=k),type:"text",class:"qkb-board-action__input",disabled:e.inputDisable,placeholder:e.inputDisablePlaceholder&&e.inputDisable?e.inputDisablePlaceholder:e.inputPlaceholder,onKeydown:t.withKeys(p,["enter"])},null,40,W),[[t.vModelText,l.value]])]),t.createElementVNode("div",X,[t.renderSlot(r.$slots,"actions",{},void 0,!0),t.createElementVNode("button",{class:"qkb-action-item qkb-action-item--send",onClick:p,disabled:!l.value||e.inputDisable},[t.renderSlot(r.$slots,"sendButton",{},()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(J)),{class:"qkb-action-icon qkb-action-icon--send"}))],!0)],8,Y)])])],2))}},[["__scopeId","data-v-a21acb61"]]),tt=["innerHTML"],et={__name:"AppStyle",props:{options:{type:Object,default:()=>({})}},setup(e){const o=e,s=t.computed(()=>{if(!o.options)return"";const{colorScheme:n,textColor:l,boardContentBg:c,bubbleBtnSize:i,botAvatarImg:p,botAvatarSize:r,inputDisableBg:_,msgBubbleBgBot:k,msgBubbleColorBot:g,msgBubbleBgUser:d,msgBubbleColorUser:h}=o.options;return`
<style type="text/css" id="qkb-bot-style">
.qkb-bubble-btn {
  background-color: ${n};
  width: ${i}px;
  height: ${i}px;
}
.qkb-bubble-btn-icon {
  fill: ${l};
  color: ${l};
}
.qkb-board {
  bottom: ${i}px;
}
.qkb-board-header {
  background-color: ${n};
}
.qkb-board-header__title {
  color: ${l};
}
.qkb-board-content {
  background-color: ${c};
}
${p?`.qkb-msg-avatar {
      width: ${r}px;
      height: ${r}px;
    }
    .qkb-msg-avatar__img {
      background-image: url(${p});
    }`:""}
.qkb-msg-bubble--bot .qkb-msg-bubble-component__text {
  color: ${g};
  background-color: ${k};
}
.qkb-msg-bubble__typing-indicator span,
.qkb-msg-bubble__typing-indicator::before,
.qkb-msg-bubble__typing-indicator::after {
  background-color: ${g};
}
.qkb-mb-button-options__btn::before {
  background-color: ${d};
}
.qkb-msg-bubble--user .qkb-msg-bubble-component__text {
  color: ${h};
  background-color: ${d};
}
.qkb-mb-button-options__btn {
  color: ${d};
  border-color: ${d};
}
.qkb-mb-button-options__btn:hover {
  color: ${h};
  background-color: ${d};
}
.qkb-board-action--disabled::before {
  background-color: ${_};
}
</style>
  `});return(n,l)=>(t.openBlock(),t.createElementBlock("div",{class:"qkb-bot-style",innerHTML:s.value,style:{display:"none"}},null,8,tt))}},ot={xmlns:"http://www.w3.org/2000/svg",width:"511pt",height:"511pt",viewBox:"1 -31 512 511"};function nt(e,o){return t.openBlock(),t.createElementBlock("svg",ot,o[0]||(o[0]=[t.createElementVNode("path",{d:"M128 448.5c-8.836 0-16-7.164-16-16v-80H48c-26.512 0-48-21.492-48-48v-256C0 21.988 21.488.5 48 .5h416c26.512 0 48 21.488 48 48v256c0 26.508-21.488 48-48 48H230.625l-91.312 91.313c-3 3-7.07 4.687-11.313 4.687m-80-416c-8.836 0-16 7.164-16 16v256c0 8.836 7.164 16 16 16h80c8.836 0 16 7.164 16 16v57.375l68.688-68.687c3-3 7.07-4.688 11.312-4.688h240c8.836 0 16-7.164 16-16v-256c0-8.836-7.164-16-16-16zm0 0"},null,-1),t.createElementVNode("path",{d:"M160 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M352 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M256 288.5c-52.996-.05-95.945-43.004-96-96 0-8.836 7.164-16 16-16s16 7.164 16 16c0 35.348 28.652 64 64 64s64-28.652 64-64c0-8.836 7.164-16 16-16s16 7.164 16 16c-.055 52.996-43.004 95.945-96 96m0 0"},null,-1)]))}const st={render:nt},lt={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 512.001 512.001"};function at(e,o){return t.openBlock(),t.createElementBlock("svg",lt,o[0]||(o[0]=[t.createElementVNode("path",{d:"M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475 0-28.285s-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0s-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.94 19.94 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285z"},null,-1)]))}const ct={render:at},it={key:0,class:"qkb-board"},rt={class:"qkb-preload-image"},bt={key:0,class:"qkb-msg-avatar__img"},y=u({__name:"BotUI",props:{options:{type:Object,default:()=>({})},messages:{type:Array},botTyping:{type:Boolean,default:!1},inputDisable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},openDelay:{type:Number}},emits:["init","destroy","msg-send"],setup(e,{emit:o}){const s=e,n=o,l=t.ref(!1),c={botTitle:"Chatbot",colorScheme:"#1b53d0",textColor:"#fff",bubbleBtnSize:56,animation:!0,boardContentBg:"#fff",botAvatarSize:32,botAvatarImg:"http://placehold.it/200x200",msgBubbleBgBot:"#f0f0f0",msgBubbleColorBot:"#000",msgBubbleBgUser:"#4356e0",msgBubbleColorUser:"#fff",inputPlaceholder:"Message",inputDisableBg:"#fff",inputDisablePlaceholder:null,bubbleZIndex:9999,bubblePosition:{bottom:"20px",right:"20px",top:null,left:null},windowZIndex:9999,windowPosition:{bottom:"20px",right:"20px",top:null,left:null}},i=t.computed(()=>({...c,...s.options})),p=t.computed(()=>{const a=[];return i.value.animation&&a.push("qkb-bot-ui--animate"),a}),r=t.computed(()=>{const a={zIndex:i.value.windowZIndex},b=i.value.windowPosition;return b.bottom!==null&&(a.bottom=b.bottom),b.right!==null&&(a.right=b.right),b.top!==null&&(a.top=b.top),b.left!==null&&(a.left=b.left),a}),_=t.computed(()=>{const a={zIndex:i.value.bubbleZIndex},b=i.value.bubblePosition;return b.bottom!==null&&(a.bottom=b.bottom),b.right!==null&&(a.right=b.right),b.top!==null&&(a.top=b.top),b.left!==null&&(a.left=b.left),a}),k=()=>{l.value||d()},g=()=>{l.value&&d()},d=()=>{l.value=!l.value,l.value?(f.on("select-button-option",q),n("init")):(f.off("select-button-option"),n("destroy"))},h=a=>{n("msg-send",a)},q=a=>{n("msg-send",a)};return s.isOpen&&(s.openDelay?setTimeout(k,s.openDelay):d()),t.onMounted(()=>{document.addEventListener(B.EVENT_OPEN,k),document.addEventListener(B.EVENT_CLOSE,g),document.addEventListener(B.EVENT_TOGGLE,d)}),t.onBeforeUnmount(()=>{f.off("select-button-option")}),(a,b)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["qkb-bot-ui",p.value]),style:t.normalizeStyle(r.value)},[t.createVNode(t.Transition,{name:"qkb-fadeUp"},{default:t.withCtx(()=>[l.value?(t.openBlock(),t.createElementBlock("div",it,[t.createVNode(C,{"bot-title":i.value.botTitle,onCloseBot:d},{header:t.withCtx(()=>[t.renderSlot(a.$slots,"header",{},void 0,!0)]),_:3},8,["bot-title"]),t.createVNode(Z,{"bot-typing":e.botTyping,"main-data":e.messages},{botTyping:t.withCtx(()=>[t.renderSlot(a.$slots,"botTyping",{},void 0,!0)]),_:3},8,["bot-typing","main-data"]),t.createVNode(v,{"input-disable":e.inputDisable,"input-placeholder":i.value.inputPlaceholder,"input-disable-placeholder":i.value.inputDisablePlaceholder,onMsgSend:h},{actions:t.withCtx(()=>[t.renderSlot(a.$slots,"actions",{},void 0,!0)]),sendButton:t.withCtx(()=>[t.renderSlot(a.$slots,"sendButton",{},void 0,!0)]),_:3},8,["input-disable","input-placeholder","input-disable-placeholder"])])):t.createCommentVNode("",!0)]),_:3}),t.createElementVNode("div",{class:"qkb-bot-bubble",style:t.normalizeStyle(_.value)},[t.createElementVNode("button",{class:"qkb-bubble-btn",onClick:d},[t.renderSlot(a.$slots,"bubbleButton",{},()=>[t.createVNode(t.Transition,{name:"qkb-scaleUp"},{default:t.withCtx(()=>[l.value?(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(ct)),{key:"2",class:"qkb-bubble-btn-icon qkb-bubble-btn-icon--close"})):(t.openBlock(),t.createBlock(t.resolveDynamicComponent(t.unref(st)),{key:"1",class:"qkb-bubble-btn-icon"}))]),_:1})],!0)])],4),t.createVNode(et,{options:i.value},null,8,["options"]),t.createElementVNode("div",rt,[i.value.botAvatarImg?(t.openBlock(),t.createElementBlock("div",bt)):t.createCommentVNode("",!0)])],6))}},[["__scopeId","data-v-5c97b7d6"]]),dt={install(e,o){e.component("VueBotUI",y)}};m.VueBotUI=y,m.default=dt,Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
