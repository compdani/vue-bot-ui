(function(d,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(d=typeof globalThis<"u"?globalThis:d||self,e(d.VueBotUI={},d.Vue))})(this,function(d,e){"use strict";const B={EVENT_OPEN:"botui-open",EVENT_CLOSE:"botui-close",EVENT_TOGGLE:"botui-toggle"},m=(t,a)=>{const l=t.__vccOpts||t;for(const[c,s]of a)l[c]=s;return l},k={class:"qkb-board-header"},h={class:"qkb-board-header__title"},y=m({__name:"Header",props:{botTitle:{type:String,default:"Chatbot"},colorScheme:{type:String,default:"#1a4bff"},textColor:{type:String,default:"#fff"}},setup(t){return e.useCssVars(a=>({"899703c0":t.colorScheme,"989fc124":t.textColor})),(a,l)=>(e.openBlock(),e.createElementBlock("div",k,[e.renderSlot(a.$slots,"header",{},()=>[e.createElementVNode("div",h,e.toDisplayString(t.botTitle),1)],!0)]))}},[["__scopeId","data-v-d4de3b4f"]]),C={class:"qkb-msg-bubble-component qkb-msg-bubble-component--single-text"},_={class:"qkb-msg-bubble-component__text"},S=m({__name:"SingleText",props:{mainData:{type:Object,required:!0},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"},isUserMessage:{type:Boolean,default:!1}},setup(t){return e.useCssVars(a=>({bb7eabf4:t.isUserMessage?t.msgBubbleBgUser:t.msgBubbleBgBot,"448759d8":t.isUserMessage?t.msgBubbleColorUser:t.msgBubbleColorBot})),(a,l)=>(e.openBlock(),e.createElementBlock("div",C,[e.createElementVNode("div",_,e.toDisplayString(t.mainData.text),1)]))}},[["__scopeId","data-v-e044f48b"]]),x={class:"qkb-msg-bubble-component qkb-msg-bubble-component--button-options"},E={class:"qkb-msg-bubble-component__text"},q={class:"qkb-msg-bubble-component__options-wrapper"},V=["onClick"],$=["href"],w=m({__name:"ButtonOptions",props:{mainData:{type:Object,required:!0},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"},isUserMessage:{type:Boolean,default:!1}},setup(t){e.useCssVars(b=>({"4d816267":t.msgBubbleBgBot,"8b4e43c2":t.msgBubbleColorBot,"62b39b2b":t.msgBubbleBgUser,de68d31a:t.msgBubbleColorUser}));const a=e.ref(!1);e.onMounted(()=>{a.value=typeof l.mainData.onClick=="function"});const l=t,c=e.ref(null),s=b=>{c.value=b.value,a.value&&l.mainData.onClick(b)};return(b,o)=>(e.openBlock(),e.createElementBlock("div",x,[e.createElementVNode("div",E,e.toDisplayString(t.mainData.text),1),e.createElementVNode("div",q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.mainData.options,(r,u)=>(e.openBlock(),e.createElementBlock("div",{key:u,class:e.normalizeClass([{active:c.value===r.value},"qkb-mb-button-options__item"])},[a.value?(e.openBlock(),e.createElementBlock("button",{key:0,class:"qkb-mb-button-options__btn",onClick:g=>s(r)},[e.createElementVNode("span",null,e.toDisplayString(r.text),1)],8,V)):(e.openBlock(),e.createElementBlock("a",{key:1,href:r.value,target:"_blank",class:"qkb-mb-button-options__btn qkb-mb-button-options__url"},[e.createElementVNode("span",null,e.toDisplayString(r.text),1)],8,$))],2))),128))])]))}},[["__scopeId","data-v-04d638ef"]]),N={key:0,class:"qkb-msg-avatar"},D={key:2,class:"qkb-msg-bubble__time"},T=m({__name:"Main",props:{message:{type:Object,required:!0},botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"}},setup(t){e.useCssVars(s=>({"4aaf0702":t.botAvatarSize+"px","4fa00e38":"url("+t.botAvatarImg+")"}));const a=t,l=e.computed(()=>a.message.agent==="bot"?"qkb-msg-bubble--bot":"qkb-msg-bubble--user"),c=e.computed(()=>{switch(a.message.type){case"button":return w;default:return S}});return(s,b)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-msg-bubble",l.value])},[t.message.agent==="bot"?(e.openBlock(),e.createElementBlock("div",N,b[0]||(b[0]=[e.createElementVNode("div",{class:"qkb-msg-avatar__img"}," ",-1)]))):e.createCommentVNode("",!0),c.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.value),{key:1,"main-data":t.message,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot,"msg-bubble-bg-user":t.msgBubbleBgUser,"msg-bubble-color-user":t.msgBubbleColorUser,"is-user-message":t.message.agent==="user"},null,8,["main-data","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user","is-user-message"])):e.createCommentVNode("",!0),t.message.createdAt?(e.openBlock(),e.createElementBlock("div",D,e.toDisplayString(t.message.createdAt),1)):e.createCommentVNode("",!0)],2))}},[["__scopeId","data-v-9c39555b"]]),v={class:"qkb-msg-bubble qkb-msg-bubble--bot"},U=m({__name:"Typing",props:{botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"}},setup(t){return e.useCssVars(a=>({"4d54dd48":t.botAvatarSize+"px","4ca3d3fb":"url("+t.botAvatarImg+")","5040f4b1":t.msgBubbleBgBot,e48ca0d6:t.msgBubbleColorBot})),(a,l)=>(e.openBlock(),e.createElementBlock("div",v,l[0]||(l[0]=[e.createStaticVNode('<div class="qkb-msg-avatar" data-v-e819e473><div class="qkb-msg-avatar__img" data-v-e819e473> </div></div><div class="qkb-msg-bubble-component qkb-msg-bubble-component--typing" data-v-e819e473><div class="qkb-msg-bubble-component__text" data-v-e819e473><div class="qkb-msg-bubble__typing-indicator" data-v-e819e473><span data-v-e819e473></span><span data-v-e819e473></span><span data-v-e819e473></span></div></div></div>',2)])))}},[["__scopeId","data-v-e819e473"]]),I={key:0,class:"qkb-board-content__bot-typing"},M=m({__name:"Content",props:{mainData:{type:Array,required:!0},botTyping:{type:Boolean,default:!1},boardContentBg:{type:String,default:"#fff"},botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"}},setup(t){e.useCssVars(b=>({ba1b7fe8:t.boardContentBg}));const a=t,l=e.ref(null),c=e.ref(null),s=()=>{const b=l.value,o=c.value.offsetHeight;b.scrollTop=o};return e.watch(()=>a.mainData,()=>{e.nextTick(()=>{s()})}),(b,o)=>(e.openBlock(),e.createElementBlock("div",{class:"qkb-board-content",ref_key:"boardContent",ref:l},[e.createElementVNode("div",{class:"qkb-board-content__bubbles",ref_key:"boardBubbles",ref:c},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.mainData,(r,u)=>(e.openBlock(),e.createBlock(T,{key:u,message:r,"bot-avatar-size":t.botAvatarSize,"bot-avatar-img":t.botAvatarImg,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot,"msg-bubble-bg-user":t.msgBubbleBgUser,"msg-bubble-color-user":t.msgBubbleColorUser},null,8,["message","bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user"]))),128)),t.botTyping?(e.openBlock(),e.createElementBlock("div",I,[e.renderSlot(b.$slots,"botTyping",{},()=>[e.createVNode(U,{"bot-avatar-size":t.botAvatarSize,"bot-avatar-img":t.botAvatarImg,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot},null,8,["bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot"])],!0)])):e.createCommentVNode("",!0)],512)],512))}},[["__scopeId","data-v-946dc6df"]]),A={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 488.721 488.721"};function z(t,a){return e.openBlock(),e.createElementBlock("svg",A,a[0]||(a[0]=[e.createElementVNode("path",{d:"M483.589 222.024a51.2 51.2 0 0 0-23.762-23.762L73.522 11.331C48.074-.998 17.451 9.638 5.122 35.086A51.2 51.2 0 0 0 3.669 76.44l67.174 167.902L3.669 412.261c-10.463 26.341 2.409 56.177 28.75 66.639a51.3 51.3 0 0 0 18.712 3.624c7.754 0 15.408-1.75 22.391-5.12l386.304-186.982c25.45-12.326 36.089-42.949 23.763-68.398M58.657 446.633c-8.484 4.107-18.691.559-22.798-7.925a17.07 17.07 0 0 1-.481-13.784l65.399-163.516h340.668zm42.121-219.358L35.379 63.759a16.64 16.64 0 0 1 4.215-18.773 16.54 16.54 0 0 1 19.063-2.884l382.788 185.173z"},null,-1)]))}const P={render:z},O={class:"qkb-board-action__wrapper"},L={class:"qkb-board-action__msg-box"},H=["disabled","placeholder"],j={class:"qkb-board-action__extra"},G=["disabled"],Z=m({__name:"Action",props:{inputPlaceholder:{type:String,default:"Type here..."},inputDisablePlaceholder:{type:String,default:"Hit the buttons above to respond"},inputDisable:{type:Boolean,default:!1},inputDisableBg:{type:String,default:"#fff"},msgBubbleBgUser:{type:String,default:"#4356e0"}},emits:["msg-send"],setup(t,{emit:a}){e.useCssVars(n=>({dd375256:t.inputDisableBg,"6e13778b":t.msgBubbleBgUser}));const l=t,c=a,s=e.ref(null),b=e.ref(null),o=e.computed(()=>{const n=[];return l.inputDisable&&n.push("qkb-board-action--disabled"),s.value&&n.push("qkb-board-action--typing"),n});e.onMounted(()=>{var n;l.inputDisable||(n=b.value)==null||n.focus(),g()});const r=()=>{var n;s.value&&!l.inputDisable&&(c("msg-send",{text:s.value}),s.value=null,(n=b.value)==null||n.focus())},u=n=>{if(n.key==="Enter")if(n.shiftKey)n.preventDefault(),r();else return},g=()=>{b.value&&(b.value.style.height="auto",b.value.style.height=b.value.scrollHeight+"px")};return e.watch(s,()=>{e.nextTick(()=>{g()})}),(n,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-board-action",o.value])},[e.createElementVNode("div",O,[e.createElementVNode("div",L,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"qkbMessageInput",ref:b,"onUpdate:modelValue":f[0]||(f[0]=i=>s.value=i),class:"qkb-board-action__input",disabled:t.inputDisable,placeholder:t.inputDisablePlaceholder&&t.inputDisable?t.inputDisablePlaceholder:t.inputPlaceholder,onKeydown:u,onInput:g,rows:"1"},null,40,H),[[e.vModelText,s.value]])]),e.createElementVNode("div",j,[e.renderSlot(n.$slots,"actions",{},void 0,!0),e.createElementVNode("button",{class:"qkb-action-item qkb-action-item--send",onClick:r,disabled:!s.value||t.inputDisable},[e.renderSlot(n.$slots,"sendButton",{},()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(P)),{class:"qkb-action-icon qkb-action-icon--send"}))],!0)],8,G)])])],2))}},[["__scopeId","data-v-f2b47962"]]),F={xmlns:"http://www.w3.org/2000/svg",width:"511pt",height:"511pt",viewBox:"1 -31 512 511"};function K(t,a){return e.openBlock(),e.createElementBlock("svg",F,a[0]||(a[0]=[e.createElementVNode("path",{d:"M128 448.5c-8.836 0-16-7.164-16-16v-80H48c-26.512 0-48-21.492-48-48v-256C0 21.988 21.488.5 48 .5h416c26.512 0 48 21.488 48 48v256c0 26.508-21.488 48-48 48H230.625l-91.312 91.313c-3 3-7.07 4.687-11.313 4.687m-80-416c-8.836 0-16 7.164-16 16v256c0 8.836 7.164 16 16 16h80c8.836 0 16 7.164 16 16v57.375l68.688-68.687c3-3 7.07-4.688 11.312-4.688h240c8.836 0 16-7.164 16-16v-256c0-8.836-7.164-16-16-16zm0 0"},null,-1),e.createElementVNode("path",{d:"M160 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M352 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M256 288.5c-52.996-.05-95.945-43.004-96-96 0-8.836 7.164-16 16-16s16 7.164 16 16c0 35.348 28.652 64 64 64s64-28.652 64-64c0-8.836 7.164-16 16-16s16 7.164 16 16c-.055 52.996-43.004 95.945-96 96m0 0"},null,-1)]))}const J={render:K},Q={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 512.001 512.001"};function R(t,a){return e.openBlock(),e.createElementBlock("svg",Q,a[0]||(a[0]=[e.createElementVNode("path",{d:"M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475 0-28.285s-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0s-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.94 19.94 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285z"},null,-1)]))}const W={render:R},X={key:0,class:"qkb-board"},Y={class:"qkb-bot-bubble"},ee={class:"qkb-preload-image"},te={key:0,class:"qkb-msg-avatar__img"},p=m({__name:"BotUI",props:{options:{type:Object,default:()=>({})},messages:{type:Array},botTyping:{type:Boolean,default:!1},inputDisable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},openDelay:{type:Number}},emits:["init","destroy","msg-send"],setup(t,{emit:a}){e.useCssVars(i=>({"9da131c2":o.value.windowZIndex,"5c73db0c":o.value.windowPosition.bottom||"auto",d99e95a2:o.value.windowPosition.right||"auto",cf8f3cb0:o.value.windowPosition.top||"auto","5101e4d6":o.value.windowPosition.left||"auto","7e875abb":o.value.bubbleZIndex,f7ac3d44:o.value.bubblePosition.bottom||"auto","676579cb":o.value.bubblePosition.right||"auto","3ccd9d44":o.value.bubblePosition.top||"auto","3f141cba":o.value.bubblePosition.left||"auto","4212fad3":o.value.bubbleBtnSize+"px","07556d71":o.value.colorScheme,"7192a202":o.value.textColor}));const l=t,c=a,s=e.ref(!1),b={botTitle:"Chatbot",colorScheme:"#1b53d0",textColor:"#fff",bubbleBtnSize:56,animation:!0,boardContentBg:"#fff",botAvatarSize:32,botAvatarImg:"http://placehold.it/200x200",msgBubbleBgBot:"#f0f0f0",msgBubbleColorBot:"#000",msgBubbleBgUser:"#4356e0",msgBubbleColorUser:"#fff",inputPlaceholder:"Message",inputDisableBg:"#fff",inputDisablePlaceholder:null,bubbleZIndex:9998,bubblePosition:{bottom:"20px",right:"20px",top:null,left:null},windowZIndex:9999,windowPosition:{bottom:"80px",right:"20px",top:null,left:null}},o=e.computed(()=>({...b,...l.options})),r=e.computed(()=>{const i=[];return o.value.animation&&i.push("qkb-bot-ui--animate"),i}),u=()=>{s.value||n()},g=()=>{s.value&&n()},n=()=>{s.value=!s.value,s.value?c("init"):c("destroy")},f=i=>{c("msg-send",i)};return l.isOpen&&(l.openDelay?setTimeout(u,l.openDelay):n()),e.onMounted(()=>{document.addEventListener(B.EVENT_OPEN,u),document.addEventListener(B.EVENT_CLOSE,g),document.addEventListener(B.EVENT_TOGGLE,n)}),(i,de)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-bot-ui",r.value])},[e.createVNode(e.Transition,{name:"qkb-fadeUp"},{default:e.withCtx(()=>[s.value?(e.openBlock(),e.createElementBlock("div",X,[e.createVNode(y,{"bot-title":o.value.botTitle,"color-scheme":o.value.colorScheme,"text-color":o.value.textColor,onCloseBot:n},{header:e.withCtx(()=>[e.renderSlot(i.$slots,"header",{},void 0,!0)]),_:3},8,["bot-title","color-scheme","text-color"]),e.createVNode(M,{"bot-typing":t.botTyping,"main-data":t.messages,"board-content-bg":o.value.boardContentBg,"bot-avatar-size":o.value.botAvatarSize,"bot-avatar-img":o.value.botAvatarImg,"msg-bubble-bg-bot":o.value.msgBubbleBgBot,"msg-bubble-color-bot":o.value.msgBubbleColorBot,"msg-bubble-bg-user":o.value.msgBubbleBgUser,"msg-bubble-color-user":o.value.msgBubbleColorUser},{botTyping:e.withCtx(()=>[e.renderSlot(i.$slots,"botTyping",{},void 0,!0)]),_:3},8,["bot-typing","main-data","board-content-bg","bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user"]),e.createVNode(Z,{"input-disable":t.inputDisable,"input-placeholder":o.value.inputPlaceholder,"input-disable-placeholder":o.value.inputDisablePlaceholder,"input-disable-bg":o.value.inputDisableBg,"msg-bubble-bg-user":o.value.msgBubbleBgUser,onMsgSend:f},{actions:e.withCtx(()=>[e.renderSlot(i.$slots,"actions",{},void 0,!0)]),sendButton:e.withCtx(()=>[e.renderSlot(i.$slots,"sendButton",{},void 0,!0)]),_:3},8,["input-disable","input-placeholder","input-disable-placeholder","input-disable-bg","msg-bubble-bg-user"])])):e.createCommentVNode("",!0)]),_:3}),e.createElementVNode("div",Y,[e.createElementVNode("button",{class:"qkb-bubble-btn",onClick:n},[e.renderSlot(i.$slots,"bubbleButton",{},()=>[e.createVNode(e.Transition,{name:"qkb-scaleUp"},{default:e.withCtx(()=>[s.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(W)),{key:"2",class:"qkb-bubble-btn-icon qkb-bubble-btn-icon--close"})):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(J)),{key:"1",class:"qkb-bubble-btn-icon"}))]),_:1})],!0)])]),e.createElementVNode("div",ee,[o.value.botAvatarImg?(e.openBlock(),e.createElementBlock("div",te)):e.createCommentVNode("",!0)])],2))}},[["__scopeId","data-v-cb88ad08"]]),oe={install(t,a){t.component("VueBotUI",p)}};d.VueBotUI=p,d.default=oe,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
