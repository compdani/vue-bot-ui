(function(m,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(m=typeof globalThis<"u"?globalThis:m||self,e(m.VueBotUI={},m.Vue))})(this,function(m,e){"use strict";function h(t){return{all:t=t||new Map,on:function(o,s){var n=t.get(o);n?n.push(s):t.set(o,[s])},off:function(o,s){var n=t.get(o);n&&(s?n.splice(n.indexOf(s)>>>0,1):t.set(o,[]))},emit:function(o,s){var n=t.get(o);n&&n.slice().map(function(a){a(s)}),(n=t.get("*"))&&n.slice().map(function(a){a(o,s)})}}}const k=h(),f={EVENT_OPEN:"botui-open",EVENT_CLOSE:"botui-close",EVENT_TOGGLE:"botui-toggle"},p=(t,o)=>{const s=t.__vccOpts||t;for(const[n,a]of o)s[n]=a;return s},y={class:"qkb-board-header"},q={class:"qkb-board-header__title"},$=p({__name:"Header",props:{botTitle:{type:String,default:"Chatbot"}},setup(t){return(o,s)=>(e.openBlock(),e.createElementBlock("div",y,[e.renderSlot(o.$slots,"header",{},()=>[e.createElementVNode("div",q,e.toDisplayString(t.botTitle),1)],!0)]))}},[["__scopeId","data-v-f9138795"]]),E={class:"qkb-msg-bubble-component qkb-msg-bubble-component--single-text"},C={class:"qkb-msg-bubble-component__text"},x=p({__name:"SingleText",props:{mainData:{type:Object,required:!0}},setup(t){return(o,s)=>(e.openBlock(),e.createElementBlock("div",E,[e.createElementVNode("div",C,e.toDisplayString(t.mainData.text),1)]))}},[["__scopeId","data-v-5c6137b5"]]),V={class:"qkb-msg-bubble-component qkb-msg-bubble-component--button-options"},N={class:"qkb-msg-bubble-component__text"},D={class:"qkb-msg-bubble-component__options-wrapper"},T=["onClick"],S=["href"],w=p({__name:"ButtonOptions",props:{mainData:{type:Object,required:!0}},setup(t){const o=e.ref(null),s=n=>{o.value=n,k.emit("select-button-option",n)};return(n,a)=>(e.openBlock(),e.createElementBlock("div",V,[e.createElementVNode("div",N,e.toDisplayString(t.mainData.text),1),e.createElementVNode("div",D,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.mainData.options,(l,i)=>(e.openBlock(),e.createElementBlock("div",{key:i,class:e.normalizeClass([{active:o.value===l.value},"qkb-mb-button-options__item"])},[l.action==="postback"?(e.openBlock(),e.createElementBlock("button",{key:0,class:"qkb-mb-button-options__btn",onClick:b=>s(l)},[e.createElementVNode("span",null,e.toDisplayString(l.text),1)],8,T)):(e.openBlock(),e.createElementBlock("a",{key:1,href:l.value,target:"_blank",class:"qkb-mb-button-options__btn qkb-mb-button-options__url"},[e.createElementVNode("span",null,e.toDisplayString(l.text),1)],8,S))],2))),128))])]))}},[["__scopeId","data-v-d9b43897"]]),M={key:0,class:"qkb-msg-avatar"},I={key:2,class:"qkb-msg-bubble__time"},O=p({__name:"Main",props:{message:{type:Object,required:!0}},setup(t){const o=t,s=e.computed(()=>o.message.agent==="bot"?"qkb-msg-bubble--bot":"qkb-msg-bubble--user"),n=e.computed(()=>{switch(o.message.type){case"button":return w;default:return x}});return(a,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-msg-bubble",s.value])},[t.message.agent==="bot"?(e.openBlock(),e.createElementBlock("div",M,l[0]||(l[0]=[e.createElementVNode("div",{class:"qkb-msg-avatar__img"}," ",-1)]))):e.createCommentVNode("",!0),n.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.value),{key:1,"main-data":t.message},null,8,["main-data"])):e.createCommentVNode("",!0),t.message.createdAt?(e.openBlock(),e.createElementBlock("div",I,e.toDisplayString(t.message.createdAt),1)):e.createCommentVNode("",!0)],2))}},[["__scopeId","data-v-8ffb9570"]]),L={},A={class:"qkb-msg-bubble qkb-msg-bubble--bot"};function P(t,o){return e.openBlock(),e.createElementBlock("div",A,o[0]||(o[0]=[e.createStaticVNode('<div class="qkb-msg-avatar" data-v-f53a7844><div class="qkb-msg-avatar__img" data-v-f53a7844> </div></div><div class="qkb-msg-bubble-component qkb-msg-bubble-component--typing" data-v-f53a7844><div class="qkb-msg-bubble-component__text" data-v-f53a7844><div class="qkb-msg-bubble__typing-indicator" data-v-f53a7844><span data-v-f53a7844></span><span data-v-f53a7844></span><span data-v-f53a7844></span></div></div></div>',2)]))}const U=p(L,[["render",P],["__scopeId","data-v-f53a7844"]]),z={key:0,class:"qkb-board-content__bot-typing"},H=p({__name:"Content",props:{mainData:{type:Array,required:!0},botTyping:{type:Boolean,default:!1}},setup(t){const o=t,s=e.ref(null),n=e.ref(null),a=()=>{const l=s.value,i=n.value.offsetHeight;l.scrollTop=i};return e.watch(()=>o.mainData,()=>{e.nextTick(()=>{a()})}),(l,i)=>(e.openBlock(),e.createElementBlock("div",{class:"qkb-board-content",ref_key:"boardContent",ref:s},[e.createElementVNode("div",{class:"qkb-board-content__bubbles",ref_key:"boardBubbles",ref:n},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.mainData,(b,c)=>(e.openBlock(),e.createBlock(O,{key:c,message:b},null,8,["message"]))),128)),t.botTyping?(e.openBlock(),e.createElementBlock("div",z,[e.renderSlot(l.$slots,"botTyping",{},()=>[e.createVNode(U)],!0)])):e.createCommentVNode("",!0)],512)],512))}},[["__scopeId","data-v-2e77dfb2"]]),j={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 488.721 488.721"};function G(t,o){return e.openBlock(),e.createElementBlock("svg",j,o[0]||(o[0]=[e.createElementVNode("path",{d:"M483.589 222.024a51.2 51.2 0 0 0-23.762-23.762L73.522 11.331C48.074-.998 17.451 9.638 5.122 35.086A51.2 51.2 0 0 0 3.669 76.44l67.174 167.902L3.669 412.261c-10.463 26.341 2.409 56.177 28.75 66.639a51.3 51.3 0 0 0 18.712 3.624c7.754 0 15.408-1.75 22.391-5.12l386.304-186.982c25.45-12.326 36.089-42.949 23.763-68.398M58.657 446.633c-8.484 4.107-18.691.559-22.798-7.925a17.07 17.07 0 0 1-.481-13.784l65.399-163.516h340.668zm42.121-219.358L35.379 63.759a16.64 16.64 0 0 1 4.215-18.773 16.54 16.54 0 0 1 19.063-2.884l382.788 185.173z"},null,-1)]))}const F={render:G},K={class:"qkb-board-action__wrapper"},J={class:"qkb-board-action__msg-box"},Q=["disabled","placeholder"],R={class:"qkb-board-action__extra"},W=["disabled"],X=p({__name:"Action",props:{inputPlaceholder:{type:String,default:"Type here..."},inputDisablePlaceholder:{type:String,default:"Hit the buttons above to respond"},inputDisable:{type:Boolean,default:!1}},emits:["msg-send"],setup(t,{emit:o}){const s=t,n=o,a=e.ref(null),l=e.ref(null),i=e.computed(()=>{const c=[];return s.inputDisable&&c.push("qkb-board-action--disabled"),a.value&&c.push("qkb-board-action--typing"),c});e.onMounted(()=>{var c;s.inputDisable||(c=l.value)==null||c.focus()});const b=()=>{var c;a.value&&!s.inputDisable&&(n("msg-send",{text:a.value}),a.value=null,(c=l.value)==null||c.focus())};return(c,_)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-board-action",i.value])},[e.createElementVNode("div",K,[e.createElementVNode("div",J,[e.withDirectives(e.createElementVNode("input",{ref_key:"qkbMessageInput",ref:l,"onUpdate:modelValue":_[0]||(_[0]=d=>a.value=d),type:"text",class:"qkb-board-action__input",disabled:t.inputDisable,placeholder:t.inputDisablePlaceholder&&t.inputDisable?t.inputDisablePlaceholder:t.inputPlaceholder,onKeydown:e.withKeys(b,["enter"])},null,40,Q),[[e.vModelText,a.value]])]),e.createElementVNode("div",R,[e.renderSlot(c.$slots,"actions",{},void 0,!0),e.createElementVNode("button",{class:"qkb-action-item qkb-action-item--send",onClick:b,disabled:!a.value||t.inputDisable},[e.renderSlot(c.$slots,"sendButton",{},()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(F)),{class:"qkb-action-icon qkb-action-icon--send"}))],!0)],8,W)])])],2))}},[["__scopeId","data-v-a21acb61"]]),Y=["innerHTML"],Z={__name:"AppStyle",props:{options:{type:Object,default:()=>({})}},setup(t){const o=t,s=e.computed(()=>{if(!o.options)return"";const{colorScheme:n,textColor:a,boardContentBg:l,bubbleBtnSize:i,botAvatarImg:b,botAvatarSize:c,inputDisableBg:_,msgBubbleBgBot:d,msgBubbleColorBot:g,msgBubbleBgUser:u,msgBubbleColorUser:r}=o.options;return`
<style type="text/css" id="qkb-bot-style">
.qkb-bubble-btn {
  background-color: ${n};
  width: ${i}px;
  height: ${i}px;
}
.qkb-bubble-btn-icon {
  fill: ${a};
  color: ${a};
}
.qkb-board {
  bottom: ${i}px;
}
.qkb-board-header {
  background-color: ${n};
}
.qkb-board-header__title {
  color: ${a};
}
.qkb-board-content {
  background-color: ${l};
}
${b?`.qkb-msg-avatar {
      width: ${c}px;
      height: ${c}px;
    }
    .qkb-msg-avatar__img {
      background-image: url(${b});
    }`:""}
.qkb-msg-bubble--bot .qkb-msg-bubble-component__text {
  color: ${g};
  background-color: ${d};
}
.qkb-msg-bubble__typing-indicator span,
.qkb-msg-bubble__typing-indicator::before,
.qkb-msg-bubble__typing-indicator::after {
  background-color: ${g};
}
.qkb-mb-button-options__btn::before {
  background-color: ${u};
}
.qkb-msg-bubble--user .qkb-msg-bubble-component__text {
  color: ${r};
  background-color: ${u};
}
.qkb-mb-button-options__btn {
  color: ${u};
  border-color: ${u};
}
.qkb-mb-button-options__btn:hover {
  color: ${r};
  background-color: ${u};
}
.qkb-board-action--disabled::before {
  background-color: ${_};
}
</style>
  `});return(n,a)=>(e.openBlock(),e.createElementBlock("div",{class:"qkb-bot-style",innerHTML:s.value,style:{display:"none"}},null,8,Y))}},v={xmlns:"http://www.w3.org/2000/svg",width:"511pt",height:"511pt",viewBox:"1 -31 512 511"};function ee(t,o){return e.openBlock(),e.createElementBlock("svg",v,o[0]||(o[0]=[e.createElementVNode("path",{d:"M128 448.5c-8.836 0-16-7.164-16-16v-80H48c-26.512 0-48-21.492-48-48v-256C0 21.988 21.488.5 48 .5h416c26.512 0 48 21.488 48 48v256c0 26.508-21.488 48-48 48H230.625l-91.312 91.313c-3 3-7.07 4.687-11.313 4.687m-80-416c-8.836 0-16 7.164-16 16v256c0 8.836 7.164 16 16 16h80c8.836 0 16 7.164 16 16v57.375l68.688-68.687c3-3 7.07-4.688 11.312-4.688h240c8.836 0 16-7.164 16-16v-256c0-8.836-7.164-16-16-16zm0 0"},null,-1),e.createElementVNode("path",{d:"M160 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M352 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M256 288.5c-52.996-.05-95.945-43.004-96-96 0-8.836 7.164-16 16-16s16 7.164 16 16c0 35.348 28.652 64 64 64s64-28.652 64-64c0-8.836 7.164-16 16-16s16 7.164 16 16c-.055 52.996-43.004 95.945-96 96m0 0"},null,-1)]))}const te={render:ee},oe={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 512.001 512.001"};function ne(t,o){return e.openBlock(),e.createElementBlock("svg",oe,o[0]||(o[0]=[e.createElementVNode("path",{d:"M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475 0-28.285s-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0s-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.94 19.94 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285z"},null,-1)]))}const se={render:ne},ae={key:0,class:"qkb-board"},le={class:"qkb-bot-bubble"},ce={class:"qkb-preload-image"},ie={key:0,class:"qkb-msg-avatar__img"},B=p({__name:"BotUI",props:{options:{type:Object,default:()=>({})},messages:{type:Array},botTyping:{type:Boolean,default:!1},inputDisable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},openDelay:{type:Number}},emits:["init","destroy","msg-send"],setup(t,{emit:o}){const s=t,n=o,a=e.ref(!1),l={botTitle:"Chatbot",colorScheme:"#1b53d0",textColor:"#fff",bubbleBtnSize:56,animation:!0,boardContentBg:"#fff",botAvatarSize:32,botAvatarImg:"http://placehold.it/200x200",msgBubbleBgBot:"#f0f0f0",msgBubbleColorBot:"#000",msgBubbleBgUser:"#4356e0",msgBubbleColorUser:"#fff",inputPlaceholder:"Message",inputDisableBg:"#fff",inputDisablePlaceholder:null},i=e.computed(()=>({...l,...s.options})),b=e.computed(()=>{const r=[];return i.value.animation&&r.push("qkb-bot-ui--animate"),r}),c=()=>{a.value||d()},_=()=>{a.value&&d()},d=()=>{a.value=!a.value,a.value?(k.on("select-button-option",u),n("init")):(k.off("select-button-option"),n("destroy"))},g=r=>{n("msg-send",r)},u=r=>{n("msg-send",r)};return s.isOpen&&(s.openDelay?setTimeout(c,s.openDelay):d()),e.onMounted(()=>{document.addEventListener(f.EVENT_OPEN,c),document.addEventListener(f.EVENT_CLOSE,_),document.addEventListener(f.EVENT_TOGGLE,d)}),e.onBeforeUnmount(()=>{k.off("select-button-option")}),(r,be)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-bot-ui",b.value])},[e.createVNode(e.Transition,{name:"qkb-fadeUp"},{default:e.withCtx(()=>[a.value?(e.openBlock(),e.createElementBlock("div",ae,[e.createVNode($,{"bot-title":i.value.botTitle,onCloseBot:d},{header:e.withCtx(()=>[e.renderSlot(r.$slots,"header",{},void 0,!0)]),_:3},8,["bot-title"]),e.createVNode(H,{"bot-typing":t.botTyping,"main-data":t.messages},{botTyping:e.withCtx(()=>[e.renderSlot(r.$slots,"botTyping",{},void 0,!0)]),_:3},8,["bot-typing","main-data"]),e.createVNode(X,{"input-disable":t.inputDisable,"input-placeholder":i.value.inputPlaceholder,"input-disable-placeholder":i.value.inputDisablePlaceholder,onMsgSend:g},{actions:e.withCtx(()=>[e.renderSlot(r.$slots,"actions",{},void 0,!0)]),sendButton:e.withCtx(()=>[e.renderSlot(r.$slots,"sendButton",{},void 0,!0)]),_:3},8,["input-disable","input-placeholder","input-disable-placeholder"])])):e.createCommentVNode("",!0)]),_:3}),e.createElementVNode("div",le,[e.createElementVNode("button",{class:"qkb-bubble-btn",onClick:d},[e.renderSlot(r.$slots,"bubbleButton",{},()=>[e.createVNode(e.Transition,{name:"qkb-scaleUp"},{default:e.withCtx(()=>[a.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(se)),{key:"2",class:"qkb-bubble-btn-icon qkb-bubble-btn-icon--close"})):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(te)),{key:"1",class:"qkb-bubble-btn-icon"}))]),_:1})],!0)])]),e.createVNode(Z,{options:i.value},null,8,["options"]),e.createElementVNode("div",ce,[i.value.botAvatarImg?(e.openBlock(),e.createElementBlock("div",ie)):e.createCommentVNode("",!0)])],2))}},[["__scopeId","data-v-e685da56"]]),re={install(t,o){t.component("VueBotUI",B)}};m.VueBotUI=B,m.default=re,Object.defineProperties(m,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
