(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.VueBotUI={},i.Vue))})(this,function(i,e){"use strict";const B={EVENT_OPEN:"botui-open",EVENT_CLOSE:"botui-close",EVENT_TOGGLE:"botui-toggle"},d=(t,a)=>{const n=t.__vccOpts||t;for(const[c,b]of a)n[c]=b;return n},k={class:"qkb-board-header"},h={class:"qkb-board-header__title"},y=d({__name:"Header",props:{botTitle:{type:String,default:"Chatbot"},colorScheme:{type:String,default:"#1a4bff"},textColor:{type:String,default:"#fff"}},setup(t){return e.useCssVars(a=>({"899703c0":t.colorScheme,"989fc124":t.textColor})),(a,n)=>(e.openBlock(),e.createElementBlock("div",k,[e.renderSlot(a.$slots,"header",{},()=>[e.createElementVNode("div",h,e.toDisplayString(t.botTitle),1)],!0)]))}},[["__scopeId","data-v-d4de3b4f"]]),C={class:"qkb-msg-bubble-component qkb-msg-bubble-component--single-text"},_={class:"qkb-msg-bubble-component__text"},S=d({__name:"SingleText",props:{mainData:{type:Object,required:!0},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"},isUserMessage:{type:Boolean,default:!1}},setup(t){return e.useCssVars(a=>({bb7eabf4:t.isUserMessage?t.msgBubbleBgUser:t.msgBubbleBgBot,"448759d8":t.isUserMessage?t.msgBubbleColorUser:t.msgBubbleColorBot})),(a,n)=>(e.openBlock(),e.createElementBlock("div",C,[e.createElementVNode("div",_,e.toDisplayString(t.mainData.text),1)]))}},[["__scopeId","data-v-e044f48b"]]),x={class:"qkb-msg-bubble-component qkb-msg-bubble-component--button-options"},E={class:"qkb-msg-bubble-component__text"},q={class:"qkb-msg-bubble-component__options-wrapper"},V=["onClick"],$=["href"],w=d({__name:"ButtonOptions",props:{mainData:{type:Object,required:!0},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"},isUserMessage:{type:Boolean,default:!1}},setup(t){e.useCssVars(c=>({"6a9bd88a":t.msgBubbleBgBot,"3fc4bc4b":t.msgBubbleColorBot,e8cdd752:t.msgBubbleBgUser,"8e490472":t.msgBubbleColorUser}));const a=e.ref(null),n=c=>!!(typeof c=="object"&&c.onClick);return(c,b)=>(e.openBlock(),e.createElementBlock("div",x,[e.createElementVNode("div",E,e.toDisplayString(t.mainData.text),1),e.createElementVNode("div",q,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.mainData.options,(l,o)=>(e.openBlock(),e.createElementBlock("div",{key:o,class:e.normalizeClass([{active:a.value===l.value},"qkb-mb-button-options__item"])},[n(l)?(e.openBlock(),e.createElementBlock("button",{key:0,class:"qkb-mb-button-options__btn",onClick:u=>l.onClick(l.value)},[e.createElementVNode("span",null,e.toDisplayString(l.text),1)],8,V)):(e.openBlock(),e.createElementBlock("a",{key:1,href:l.value,target:"_blank",class:"qkb-mb-button-options__btn qkb-mb-button-options__url"},[e.createElementVNode("span",null,e.toDisplayString(l.text),1)],8,$))],2))),128))])]))}},[["__scopeId","data-v-dd76e5ab"]]),N={key:0,class:"qkb-msg-avatar"},D={key:2,class:"qkb-msg-bubble__time"},T=d({__name:"Main",props:{message:{type:Object,required:!0},botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"}},setup(t){e.useCssVars(b=>({"4aaf0702":t.botAvatarSize+"px","4fa00e38":"url("+t.botAvatarImg+")"}));const a=t,n=e.computed(()=>a.message.agent==="bot"?"qkb-msg-bubble--bot":"qkb-msg-bubble--user"),c=e.computed(()=>{switch(a.message.type){case"button":return w;default:return S}});return(b,l)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-msg-bubble",n.value])},[t.message.agent==="bot"?(e.openBlock(),e.createElementBlock("div",N,l[0]||(l[0]=[e.createElementVNode("div",{class:"qkb-msg-avatar__img"}," ",-1)]))):e.createCommentVNode("",!0),c.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(c.value),{key:1,"main-data":t.message,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot,"msg-bubble-bg-user":t.msgBubbleBgUser,"msg-bubble-color-user":t.msgBubbleColorUser,"is-user-message":t.message.agent==="user"},null,8,["main-data","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user","is-user-message"])):e.createCommentVNode("",!0),t.message.createdAt?(e.openBlock(),e.createElementBlock("div",D,e.toDisplayString(t.message.createdAt),1)):e.createCommentVNode("",!0)],2))}},[["__scopeId","data-v-9c39555b"]]),U={class:"qkb-msg-bubble qkb-msg-bubble--bot"},I=d({__name:"Typing",props:{botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"}},setup(t){return e.useCssVars(a=>({"4d54dd48":t.botAvatarSize+"px","4ca3d3fb":"url("+t.botAvatarImg+")","5040f4b1":t.msgBubbleBgBot,e48ca0d6:t.msgBubbleColorBot})),(a,n)=>(e.openBlock(),e.createElementBlock("div",U,n[0]||(n[0]=[e.createStaticVNode('<div class="qkb-msg-avatar" data-v-e819e473><div class="qkb-msg-avatar__img" data-v-e819e473> </div></div><div class="qkb-msg-bubble-component qkb-msg-bubble-component--typing" data-v-e819e473><div class="qkb-msg-bubble-component__text" data-v-e819e473><div class="qkb-msg-bubble__typing-indicator" data-v-e819e473><span data-v-e819e473></span><span data-v-e819e473></span><span data-v-e819e473></span></div></div></div>',2)])))}},[["__scopeId","data-v-e819e473"]]),v={key:0,class:"qkb-board-content__bot-typing"},A=d({__name:"Content",props:{mainData:{type:Array,required:!0},botTyping:{type:Boolean,default:!1},boardContentBg:{type:String,default:"#fff"},botAvatarSize:{type:Number,default:32},botAvatarImg:{type:String,default:"http://placehold.it/200x200"},msgBubbleBgBot:{type:String,default:"#f0f0f0"},msgBubbleColorBot:{type:String,default:"#000"},msgBubbleBgUser:{type:String,default:"#4356e0"},msgBubbleColorUser:{type:String,default:"#fff"}},setup(t){e.useCssVars(l=>({ba1b7fe8:t.boardContentBg}));const a=t,n=e.ref(null),c=e.ref(null),b=()=>{const l=n.value,o=c.value.offsetHeight;l.scrollTop=o};return e.watch(()=>a.mainData,()=>{e.nextTick(()=>{b()})}),(l,o)=>(e.openBlock(),e.createElementBlock("div",{class:"qkb-board-content",ref_key:"boardContent",ref:n},[e.createElementVNode("div",{class:"qkb-board-content__bubbles",ref_key:"boardBubbles",ref:c},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.mainData,(u,m)=>(e.openBlock(),e.createBlock(T,{key:m,message:u,"bot-avatar-size":t.botAvatarSize,"bot-avatar-img":t.botAvatarImg,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot,"msg-bubble-bg-user":t.msgBubbleBgUser,"msg-bubble-color-user":t.msgBubbleColorUser},null,8,["message","bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user"]))),128)),t.botTyping?(e.openBlock(),e.createElementBlock("div",v,[e.renderSlot(l.$slots,"botTyping",{},()=>[e.createVNode(I,{"bot-avatar-size":t.botAvatarSize,"bot-avatar-img":t.botAvatarImg,"msg-bubble-bg-bot":t.msgBubbleBgBot,"msg-bubble-color-bot":t.msgBubbleColorBot},null,8,["bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot"])],!0)])):e.createCommentVNode("",!0)],512)],512))}},[["__scopeId","data-v-946dc6df"]]),M={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 488.721 488.721"};function z(t,a){return e.openBlock(),e.createElementBlock("svg",M,a[0]||(a[0]=[e.createElementVNode("path",{d:"M483.589 222.024a51.2 51.2 0 0 0-23.762-23.762L73.522 11.331C48.074-.998 17.451 9.638 5.122 35.086A51.2 51.2 0 0 0 3.669 76.44l67.174 167.902L3.669 412.261c-10.463 26.341 2.409 56.177 28.75 66.639a51.3 51.3 0 0 0 18.712 3.624c7.754 0 15.408-1.75 22.391-5.12l386.304-186.982c25.45-12.326 36.089-42.949 23.763-68.398M58.657 446.633c-8.484 4.107-18.691.559-22.798-7.925a17.07 17.07 0 0 1-.481-13.784l65.399-163.516h340.668zm42.121-219.358L35.379 63.759a16.64 16.64 0 0 1 4.215-18.773 16.54 16.54 0 0 1 19.063-2.884l382.788 185.173z"},null,-1)]))}const P={render:z},O={class:"qkb-board-action__wrapper"},L={class:"qkb-board-action__msg-box"},H=["disabled","placeholder"],j={class:"qkb-board-action__extra"},G=["disabled"],Z=d({__name:"Action",props:{inputPlaceholder:{type:String,default:"Type here..."},inputDisablePlaceholder:{type:String,default:"Hit the buttons above to respond"},inputDisable:{type:Boolean,default:!1},inputDisableBg:{type:String,default:"#fff"},msgBubbleBgUser:{type:String,default:"#4356e0"}},emits:["msg-send"],setup(t,{emit:a}){e.useCssVars(s=>({dd375256:t.inputDisableBg,"6e13778b":t.msgBubbleBgUser}));const n=t,c=a,b=e.ref(null),l=e.ref(null),o=e.computed(()=>{const s=[];return n.inputDisable&&s.push("qkb-board-action--disabled"),b.value&&s.push("qkb-board-action--typing"),s});e.onMounted(()=>{var s;n.inputDisable||(s=l.value)==null||s.focus(),g()});const u=()=>{var s;b.value&&!n.inputDisable&&(c("msg-send",{text:b.value}),b.value=null,(s=l.value)==null||s.focus())},m=s=>{if(s.key==="Enter")if(s.shiftKey)s.preventDefault(),u();else return},g=()=>{l.value&&(l.value.style.height="auto",l.value.style.height=l.value.scrollHeight+"px")};return e.watch(b,()=>{e.nextTick(()=>{g()})}),(s,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-board-action",o.value])},[e.createElementVNode("div",O,[e.createElementVNode("div",L,[e.withDirectives(e.createElementVNode("textarea",{ref_key:"qkbMessageInput",ref:l,"onUpdate:modelValue":f[0]||(f[0]=r=>b.value=r),class:"qkb-board-action__input",disabled:t.inputDisable,placeholder:t.inputDisablePlaceholder&&t.inputDisable?t.inputDisablePlaceholder:t.inputPlaceholder,onKeydown:m,onInput:g,rows:"1"},null,40,H),[[e.vModelText,b.value]])]),e.createElementVNode("div",j,[e.renderSlot(s.$slots,"actions",{},void 0,!0),e.createElementVNode("button",{class:"qkb-action-item qkb-action-item--send",onClick:u,disabled:!b.value||t.inputDisable},[e.renderSlot(s.$slots,"sendButton",{},()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(P)),{class:"qkb-action-icon qkb-action-icon--send"}))],!0)],8,G)])])],2))}},[["__scopeId","data-v-f2b47962"]]),F={xmlns:"http://www.w3.org/2000/svg",width:"511pt",height:"511pt",viewBox:"1 -31 512 511"};function K(t,a){return e.openBlock(),e.createElementBlock("svg",F,a[0]||(a[0]=[e.createElementVNode("path",{d:"M128 448.5c-8.836 0-16-7.164-16-16v-80H48c-26.512 0-48-21.492-48-48v-256C0 21.988 21.488.5 48 .5h416c26.512 0 48 21.488 48 48v256c0 26.508-21.488 48-48 48H230.625l-91.312 91.313c-3 3-7.07 4.687-11.313 4.687m-80-416c-8.836 0-16 7.164-16 16v256c0 8.836 7.164 16 16 16h80c8.836 0 16 7.164 16 16v57.375l68.688-68.687c3-3 7.07-4.688 11.312-4.688h240c8.836 0 16-7.164 16-16v-256c0-8.836-7.164-16-16-16zm0 0"},null,-1),e.createElementVNode("path",{d:"M160 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M352 144.5c-17.672 0-32-14.328-32-32s14.328-32 32-32 32 14.328 32 32-14.328 32-32 32M256 288.5c-52.996-.05-95.945-43.004-96-96 0-8.836 7.164-16 16-16s16 7.164 16 16c0 35.348 28.652 64 64 64s64-28.652 64-64c0-8.836 7.164-16 16-16s16 7.164 16 16c-.055 52.996-43.004 95.945-96 96m0 0"},null,-1)]))}const J={render:K},Q={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",viewBox:"0 0 512.001 512.001"};function R(t,a){return e.openBlock(),e.createElementBlock("svg",Q,a[0]||(a[0]=[e.createElementVNode("path",{d:"M284.286 256.002 506.143 34.144c7.811-7.811 7.811-20.475 0-28.285s-20.475-7.811-28.285 0L256 227.717 34.143 5.859c-7.811-7.811-20.475-7.811-28.285 0s-7.811 20.475 0 28.285l221.857 221.857L5.858 477.859c-7.811 7.811-7.811 20.475 0 28.285a19.94 19.94 0 0 0 14.143 5.857 19.94 19.94 0 0 0 14.143-5.857L256 284.287l221.857 221.857c3.905 3.905 9.024 5.857 14.143 5.857s10.237-1.952 14.143-5.857c7.811-7.811 7.811-20.475 0-28.285z"},null,-1)]))}const W={render:R},X={key:0,class:"qkb-board"},Y={class:"qkb-bot-bubble"},ee={class:"qkb-preload-image"},te={key:0,class:"qkb-msg-avatar__img"},p=d({__name:"BotUI",props:{options:{type:Object,default:()=>({})},messages:{type:Array},botTyping:{type:Boolean,default:!1},inputDisable:{type:Boolean,default:!1},isOpen:{type:Boolean,default:!1},openDelay:{type:Number}},emits:["init","destroy","msg-send"],setup(t,{emit:a}){e.useCssVars(r=>({"9da131c2":o.value.windowZIndex,"5c73db0c":o.value.windowPosition.bottom||"auto",d99e95a2:o.value.windowPosition.right||"auto",cf8f3cb0:o.value.windowPosition.top||"auto","5101e4d6":o.value.windowPosition.left||"auto","7e875abb":o.value.bubbleZIndex,f7ac3d44:o.value.bubblePosition.bottom||"auto","676579cb":o.value.bubblePosition.right||"auto","3ccd9d44":o.value.bubblePosition.top||"auto","3f141cba":o.value.bubblePosition.left||"auto","4212fad3":o.value.bubbleBtnSize+"px","07556d71":o.value.colorScheme,"7192a202":o.value.textColor}));const n=t,c=a,b=e.ref(!1),l={botTitle:"Chatbot",colorScheme:"#1b53d0",textColor:"#fff",bubbleBtnSize:56,animation:!0,boardContentBg:"#fff",botAvatarSize:32,botAvatarImg:"http://placehold.it/200x200",msgBubbleBgBot:"#f0f0f0",msgBubbleColorBot:"#000",msgBubbleBgUser:"#4356e0",msgBubbleColorUser:"#fff",inputPlaceholder:"Message",inputDisableBg:"#fff",inputDisablePlaceholder:null,bubbleZIndex:9998,bubblePosition:{bottom:"20px",right:"20px",top:null,left:null},windowZIndex:9999,windowPosition:{bottom:"80px",right:"20px",top:null,left:null}},o=e.computed(()=>({...l,...n.options})),u=e.computed(()=>{const r=[];return o.value.animation&&r.push("qkb-bot-ui--animate"),r}),m=()=>{b.value||s()},g=()=>{b.value&&s()},s=()=>{b.value=!b.value,b.value?c("init"):c("destroy")},f=r=>{c("msg-send",r)};return n.isOpen&&(n.openDelay?setTimeout(m,n.openDelay):s()),e.onMounted(()=>{document.addEventListener(B.EVENT_OPEN,m),document.addEventListener(B.EVENT_CLOSE,g),document.addEventListener(B.EVENT_TOGGLE,s)}),(r,de)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["qkb-bot-ui",u.value])},[e.createVNode(e.Transition,{name:"qkb-fadeUp"},{default:e.withCtx(()=>[b.value?(e.openBlock(),e.createElementBlock("div",X,[e.createVNode(y,{"bot-title":o.value.botTitle,"color-scheme":o.value.colorScheme,"text-color":o.value.textColor,onCloseBot:s},{header:e.withCtx(()=>[e.renderSlot(r.$slots,"header",{},void 0,!0)]),_:3},8,["bot-title","color-scheme","text-color"]),e.createVNode(A,{"bot-typing":t.botTyping,"main-data":t.messages,"board-content-bg":o.value.boardContentBg,"bot-avatar-size":o.value.botAvatarSize,"bot-avatar-img":o.value.botAvatarImg,"msg-bubble-bg-bot":o.value.msgBubbleBgBot,"msg-bubble-color-bot":o.value.msgBubbleColorBot,"msg-bubble-bg-user":o.value.msgBubbleBgUser,"msg-bubble-color-user":o.value.msgBubbleColorUser},{botTyping:e.withCtx(()=>[e.renderSlot(r.$slots,"botTyping",{},void 0,!0)]),_:3},8,["bot-typing","main-data","board-content-bg","bot-avatar-size","bot-avatar-img","msg-bubble-bg-bot","msg-bubble-color-bot","msg-bubble-bg-user","msg-bubble-color-user"]),e.createVNode(Z,{"input-disable":t.inputDisable,"input-placeholder":o.value.inputPlaceholder,"input-disable-placeholder":o.value.inputDisablePlaceholder,"input-disable-bg":o.value.inputDisableBg,"msg-bubble-bg-user":o.value.msgBubbleBgUser,onMsgSend:f},{actions:e.withCtx(()=>[e.renderSlot(r.$slots,"actions",{},void 0,!0)]),sendButton:e.withCtx(()=>[e.renderSlot(r.$slots,"sendButton",{},void 0,!0)]),_:3},8,["input-disable","input-placeholder","input-disable-placeholder","input-disable-bg","msg-bubble-bg-user"])])):e.createCommentVNode("",!0)]),_:3}),e.createElementVNode("div",Y,[e.createElementVNode("button",{class:"qkb-bubble-btn",onClick:s},[e.renderSlot(r.$slots,"bubbleButton",{},()=>[e.createVNode(e.Transition,{name:"qkb-scaleUp"},{default:e.withCtx(()=>[b.value?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(W)),{key:"2",class:"qkb-bubble-btn-icon qkb-bubble-btn-icon--close"})):(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(J)),{key:"1",class:"qkb-bubble-btn-icon"}))]),_:1})],!0)])]),e.createElementVNode("div",ee,[o.value.botAvatarImg?(e.openBlock(),e.createElementBlock("div",te)):e.createCommentVNode("",!0)])],2))}},[["__scopeId","data-v-cb88ad08"]]),oe={install(t,a){t.component("VueBotUI",p)}};i.VueBotUI=p,i.default=oe,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
